// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")   // conexão para rodar a aplicação
  directUrl = env("DIRECT_URL")     // conexão direta para migrations
}

model Client {
  id               String    @id @default(cuid())
  name             String
  email            String
  phone            String
  dateOfBirth      String?
  rg               String?
  postalCode       String?
  address          String?
  neighborhood     String?
  city             String?
  state            String?
  registrationDate String
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  devices          Device[]

  @@map("clients")
}

model Device {
  id                 String    @id @default(cuid())
  clientId           String
  clientName         String
  clientAddress      String?
  clientNeighborhood String?
  clientPhone        String
  device             String
  model              String?
  defect             String
  voltage            String    @default("110")
  repair             String?
  budget             String?
  entryDate          String
  promisedDate       String?
  observation        String?
  accepted           String    @default("não")
  completionDate     String?
  exitDate           String?
  status             String    @default("Aguardando")
  warranty           String?
  downloaded         Boolean   @default(false)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  client             Client    @relation(fields: [clientId], references: [id])

  @@map("devices")
}
